<!DOCTYPE html>
<html lang="en">

<head>
    <title>Personalised User Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="../neo4jd3/docs/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
        integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/stylesheets/style.css">
    <link rel="stylesheet" href="../neo4jd3/docs/css/neo4jd3.min.css?v=0.0.1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://kraaden.github.io/autocomplete/autocomplete.css">
</head>

<body>
    <div class="container">
        <div class="img-container">
            <img id="user-img" class="img-fluid" src="../assets/images/user.png" alt="user"></img>
        </div>
        <h1 class="text-center"><b>Personalised User Profile</b></h1>
        <p class="text-center">We make your document recommendations more relevant by customising the documents returned
            to your preferences.</p>
        <br>
        <div class="slideshow-container">
            <div class="figures">
                <figure class="highcharts-figure" style="border: 1px solid #aaa">
                    <div id="container"></div>
                    <img id="preloader" src="../assets/images/preloader.gif" alt="Loading..."></img>
                    <p class="highcharts-description">
                        Each topic is represented by a function of 10 words. The 'Overall Score' of each word = weight
                        of word in topic &times; weight of topic given your user profile. The approx. relative weights
                        of each topic can be seen in the relative sizes of the Topic nodes.
                    </p>
                </figure>
            </div>
            <div class="figures">
                <figure class="highcharts-figure" style="border: 1px solid #aaa">
                    <div id="container2"></div>
                    <img id="preloader2" src="../assets/images/preloader.gif" alt="Loading..."></img>
                    <p class="highcharts-description">
                        The proportion of each entity is calculated by taking the (Personalised PageRank (PPR) Score of
                        the Entity) / (Sum of all Scores of Included Entities) &times; 100%. Each PPR Score is computed
                        based on your user profile.
                    </p>
                </figure>
            </div>
            <a class="prev" id="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" id="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        <!-- The dots/circles -->
        <div style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
        </div>
        <br><br>
        <div class="slideshow-container" id="graphProfile">
            <div class="sec_header">Your Profile in a Graph</div>
            <p class="sec_subheader">You can <b><u>HOVER</u></b> over each node for more information; <b><u>DRAG</u></b>
                each node to desired positions; <b><u>DOUBLE-CLICK</u></b> on Document nodes to expand its topic and
                entities;<br><b><u>SEARCH</u></b> for a node by DocID, Entity Name or TopicID; and finally
                <b><u>RESET</u></b> the graph to return to its original state. You can also <b><u>ZOOM</u></b> or
                <b><u>PAN</u></b> using mouse controls in the container.
            </p>
            <div style="width:100%; height:auto; padding-bottom: 5px;">
                <div class="input-group">
                    <input id="search_input" type="text" class="form-control" placeholder="Type here..." />
                    <div class="input-group-append">
                        <button id="search_btn" type="button" class="btn btn-outline-secondary"
                            onclick="submitSearch()"></button>
                        <button id="toggle_btn" type="button"
                            class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
                            style="border-radius:0 .25em .25em 0" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <span class="sr-only"></span>
                        </button>
                        <div class="dropdown-menu">
                            <button id="dropdown-1" class="dropdown-item" onclick="changeSearch(1)"></button>
                            <button id="dropdown-2" class="dropdown-item" onclick="changeSearch(2)"></button>
                        </div>
                    </div>
                    <button class="restart-btn float-right" onclick="resetGraph()">Reset Graph</button>
                </div>
            </div>
            <div id="neo4jd3"></div>
        </div>
        <br><br>
        <div class="slideshow-container">
            <div class="sec_header">Update Your Interests</div>
            <p class="sec_subheader">Add or remove interests from your user profile as desired.</p>
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#existing">Update Existing Preferences</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#adding">Add New Preferences</a>
                </li>
            </ul>
            <div class="tab-content">
                <div id="existing" class="tab-pane fade show active">
                    <table class="table table-hover table-dark">
                        <tbody id="pref_table">
                        </tbody>
                        <p style="font-size: small; margin-top: 10px">Legend: <i class='far fa-check-circle checked'
                                style="float:none; padding-left: 5px; padding-right: 5px"></i> Our Records/Predictions of Your
                            Current
                            Preferences; <i class='far fa-check-circle'
                                style="float:none; padding-left: 5px; padding-right: 5px"></i> Preferences Selected To
                            Be
                            Removed</p>
                        <img id="preloader3" src="../assets/images/preloader.gif" alt="Loading..."></img>
                    </table>
                    <button class="btn btn-lg btn-primary float-right" onclick="updateExistingPref()">Update Preferences</button>
                    <br><br>
                </div>
                <div id="adding" class="tab-pane fade">
                    <div class="ui-widget">
                        <input id="search_new" class="form-control"
                            placeholder="Search for a Topic or an Entity (ex: UK)">
                    </div>
                    <br>
                    <div class="selected_values" id="selected_values">
                        <b>Selected from Search: </b>

                    </div>
                    <hr>
                    <div class="suggested_values" id="suggested_values">
                        <b>Suggested: </b>
                    </div>
                    <br>
                    <button class="btn btn-lg btn-primary float-right" onclick="addToLikedItems()">Add Preferences</button>
                    <br><br>
                </div>
            </div>
            <br><br>
            <div class="curr_pref">
                <div class="sec_header">Preferences Currently Indicated</div>
                <p class="sec_subheader">Topics or entities that you have explicitly added to or removed from preferences previously.</p>
                <div class="row">
                    <div class="col" style="border-right: 1px solid grey">
                        <p class="summary">We will show you <b style="color: #7ba9fd">more</b> of:</p>
                        <ul id="showmore" class="list-group"></ul>
                    </div>
                    <div class="col">
                        <p class="summary">We will show you <b style="color:#CF6679">less</b> of:</p>
                        <ul id="showless" class="list-group"></ul>
                    </div>
                </div>
            </div>
            <br><br>
            <footer class="page-footer font-small">
                <div class="footer-copyright text-center py-3">
                    <a href="https://github.com/shirleyow/">
                        <i class="fab fa-github" style="color: #E0E0E3; margin-right:5px"></i>
                    </a>Shirley Ow, 2021
                </div>
            </footer>
        </div>
    </div>
    <!-- Scripts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="../neo4jd3/docs/js/d3.min.js"></script>
    <script src="../neo4jd3/docs/js/neo4jd3.js?v=0.0.1"></script>
    <script src="https://unpkg.com/neo4j-driver@4.2.3/lib/browser/neo4j-web.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://kraaden.github.io/autocomplete/autocomplete.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="../src/neo4j_driver.js"></script>
    <script src="../src/highcharts_script.js"></script>
    <script async src="../src/neo4jd3_script.js"></script>
    <script async src="../src/updateInterests_script.js"></script>
    <script async src="../src/addInterests_script.js"></script>
</body>

</html>